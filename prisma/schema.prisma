generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  phone     String?
  city      String?
  state     String?
  zipCode   String?
  age       Int?
  playableAgeMin Int?
  playableAgeMax Int?
  gender    String?
  height    Int?
  weight    Int?
  ethnicity String?
  hairColor String?
  eyeColor  String?
  visibleTattoos Boolean @default(false)
  
  headshot  String?
  fullBody  String?
  resume    String?
  demoReel  String?
  
  unionStatus String?
  skills      String[]
  roleTypesInterested String[]
  comfortLevels String[]
  compensationMin String?
  compensationPreference String?
  
  availability String?
  reliableTransportation Boolean @default(false)
  travelWilling Boolean @default(false)
  
  stripeCustomerId String?
  stripeSubId      String?
  subStatus        String   @default("TRIAL")
  trialEndsAt      DateTime?
  
  onboardingStep     Int      @default(1)
  onboardingComplete Boolean  @default(false)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  submissions Submission[]
}

model CastingCall {
  id          String   @id @default(cuid())
  title       String
  production  String
  description String
  roleType    String
  genderReq   String
  ageMin      Int
  ageMax      Int
  ethnicityReq String
  location    String
  compensation String
  unionReq    String
  skillsRequired String[]
  shootDates  String
  castingEmail String
  submissionDeadline DateTime
  createdAt   DateTime @default(now())
  
  submissions Submission[]
}

model Submission {
  id           String   @id @default(cuid())
  userId       String
  callId       String
  status       String   @default("SENT")
  method       String   @default("MANUAL")
  matchScore   Int?
  castingEmail String
  submittedAt  DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id])
  call CastingCall @relation(fields: [callId], references: [id])
  
  @@unique([userId, callId])
}
